---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";
import TeacherCard from "../components/TeacherCard.astro";
import QRVersion from "../components/QRVersion.astro";

const teachers = [
    {
        id: "isaac-reyes",
        name: "Isaac Reyes",
        image: "/images/isaac-reyes.jpg",
        instrument: "Clarinete Soprano",
        repertoire: [
            {
                piece: "Sonata en Sib Mayor",
                students: ["María González", "Pedro López"],
            },
            { piece: "Concierto Mozart K622", students: ["Ana Martínez"] },
            {
                piece: "Capricho No. 1",
                students: ["Luis Rodríguez", "Carmen Silva"],
            },
        ],
    },
    {
        id: "isaac-reyes-2",
        name: "Isaac de Yes",
        image: "/images/isaac-yes.jpg",
        instrument: "Clarinete Bajo",
        repertoire: [
            {
                piece: "Beethoven Sinfonía 6",
                students: ["Sofia Chen", "Miguel Torres"],
            },
            { piece: "Brahms Sonata Op. 120", students: ["Elena Vargas"] },
            {
                piece: "Debussy Primera Rapsodia",
                students: ["Carlos Mendez", "Lucía Herrera"],
            },
        ],
    },
    {
        id: "professor-garcia",
        name: "Profesor García",
        image: "/images/profesor-garcia.jpg",
        instrument: "Clarinete Alto",
        repertoire: [
            {
                piece: "Weber Concertino",
                students: ["Andrea Morales", "Javier Castro"],
            },
            { piece: "Poulenc Sonata", students: ["Isabella Cruz"] },
            {
                piece: "Copland Concerto",
                students: ["Roberto Kim", "Natalia Vega"],
            },
        ],
    },
    {
        id: "invitado-especial",
        name: "Invitado Especial",
        image: null, // Esto generará el perfil de incógnito
        instrument: "Solista Internacional",
        isGuest: true,
    },
];
---

<Layout title="Día del Clarinete">
    <main class="min-h-screen bg-gradient-to-br from-purple-50 to-blue-50">
        <!-- Vista Normal/Móvil -->
        <div id="mobile-version" class="block">
            <!-- Header -->
            <header class="bg-white shadow-lg border-b-4 border-purple-600">
                <div class="container mx-auto px-4 py-6">
                    <h1
                        class="text-4xl font-bold text-purple-800 text-center mb-2"
                    >
                        Día del Clarinete
                    </h1>
                    <p class="text-center text-gray-600 text-lg">
                        Celebrando la música y el talento
                    </p>
                </div>
            </header>

            <!-- Grid de Profesores -->
            <section class="container mx-auto px-4 py-8">
                <div
                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 max-w-4xl mx-auto"
                >
                    {
                        teachers.map((teacher) => (
                            <TeacherCard teacher={teacher} />
                        ))
                    }
                </div>
            </section>

            <!-- Información del Evento -->
            <section class="bg-white shadow-lg mx-4 rounded-lg p-6 mb-8">
                <h2 class="text-2xl font-bold text-purple-800 mb-4">
                    Información del Evento
                </h2>
                <div class="space-y-3 text-gray-700">
                    <p><strong>Fecha:</strong> [Fecha del evento]</p>
                    <p><strong>Hora:</strong> [Hora del evento]</p>
                    <p><strong>Lugar:</strong> [Ubicación del evento]</p>
                    <p><strong>Entrada:</strong> Libre</p>
                </div>
            </section>
        </div>

        <!-- Vista para Imprimir con QR (Inicialmente oculta) -->
        <div id="qr-version" class="hidden">
            <QRVersion teachers={teachers} />
        </div>

        <!-- Botón para cambiar vista -->
        <div class="fixed bottom-4 right-4 z-50">
            <button
                id="toggle-view"
                class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full shadow-lg transition-colors"
            >
                Vista QR
            </button>
        </div>
    </main>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggleBtn = document.getElementById("toggle-view");
            const mobileVersion = document.getElementById("mobile-version");
            const qrVersion = document.getElementById("qr-version");
            let isQRView = false;

            toggleBtn?.addEventListener("click", function () {
                isQRView = !isQRView;

                if (isQRView) {
                    mobileVersion?.classList.add("hidden");
                    qrVersion?.classList.remove("hidden");
                    toggleBtn.textContent = "Vista Normal";
                } else {
                    mobileVersion?.classList.remove("hidden");
                    qrVersion?.classList.add("hidden");
                    toggleBtn.textContent = "Vista QR";
                }
            });
        });
    </script>
</Layout>
